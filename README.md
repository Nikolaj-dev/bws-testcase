# BWS Testcase: Bet Maker & Line Provider

Этот проект включает два микросервиса: **Bet Maker** и **Line Provider**. Проект работает с использованием **Docker** и **Docker Compose** для удобного развертывания и взаимодействия между сервисами.

## Установка и запуск

### 1. Клонирование репозитория

Для начала, клонируйте репозиторий на вашу машину:

```bash
git clone https://github.com/your-username/bws-testcase.git
cd bws-testcase
```

### 2. Установка зависимостей

Убедитесь, что у вас установлен Docker и Docker Compose. Если они не установлены, следуйте инструкциям на официальных сайтах для их установки.

### 3. Запуск контейнеров

Для запуска контейнеров выполните следующие команды:

1. Соберите и запустите контейнеры:

   ```bash
   docker-compose up --build
   ```

   Это создаст и запустит два сервиса:
   - **Bet Maker** — сервис для ставок (доступен на порту `8001`).
   - **Line Provider** — сервис для предоставления информации о событиях (доступен на порту `8000`).
   - **Redis** — контейнер для хранения данных о ставках (доступен на порту `6379`).
 
2. Чтобы остановить контейнеры, используйте команду:

   ```bash
   docker-compose down
   ```

## Описание сервисов

### **Bet Maker**

Сервис **Bet Maker** позволяет делать ставки на события и обновлять их статус. Он хранит информацию о ставках в **Redis** (в памяти) и взаимодействует с **Line Provider** для получения списка событий.

1. **POST `/bet`**: Создает ставку на событие.
   - `event_id`: Идентификатор события.
   - `amount`: Сумма ставки.

2. **GET `/bets`**: Получает список всех сделанных ставок.

3. **POST `/update_bet_status`**: Обновляет статус ставки (выиграла или проиграла).
   - `event_id`: Идентификатор события.
   - `status`: Новый статус ставки (например, `"won"` или `"lost"`).

### **Line Provider**

Сервис **Line Provider** предоставляет информацию о событиях, на которые можно ставить ставки. Он хранит данные о событиях в памяти, и когда **Bet Maker** запрашивает события, они предоставляются через API.

1. **GET `/events`**: Получает список всех доступных событий с состоянием `"not_completed"` и дедлайном в будущем.

### Как работают сервисы

- **Bet Maker** делает запросы к **Line Provider**, чтобы получить информацию о доступных событиях. Эти события хранятся в памяти внутри **Line Provider**.
- **Bet Maker** использует **Redis** для хранения ставок и их статусов. Это позволяет эффективно управлять состоянием ставок и быстро их обновлять.